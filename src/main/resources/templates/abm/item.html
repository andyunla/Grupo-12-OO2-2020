<!DOCTYPE html>
<html lang="en">

<head th:replace="fragments/head :: head(title='Item')"></head>

<body class="container-fluid m-0 p-0">

	<!-- TITULO -->
	<nav th:replace="fragments/navbar :: navbar(active='abm')"></nav>
	<header class="text-center m-3">
		<h1 class="display-4">ITEM</h1>
	</header>

	<!-- BOTON AGREGAR -->
	<main class="w-100 d-flex flex-column align-items-center">
		<button class="btn btn-info m-3" type="button" data-toggle="collapse"
			data-target="#collapseForm" id="buttonAgregar">Agregrar</button>

		<!-- DATOS A INGRESAR -->
		<form class="col-11 col-sm-8 col-md-7 m-1 p-2 mx-auto bg-light rounded collapse"
			id="collapseForm" action="#" th:action="@{/item/agregar}"
			th:object="${item}" method="post">

			<!-- ATRIBUTO CANTIDAD -->
			<div class="form-group row">
				<label for="cantidadNuevoItem" class="col-md-2 col-3">Cantidad</label>
				<input type="text" class="form-control col-md-9 col-8" id="cantidadNuevoItem" th:field="*{cantidad}" min="1" required />
				<p th:if="${#fields.hasErrors('cantidad')}" th:errors="*{cantidad}">Cantidad tiene que ser 1 o mayor</p>
			</div>

			<!-- ATRIBUTO PRODUCTO -->
			<div class="form-group row">
				<label for="productoNuevoItem" class="col-sm-3 col-4">Producto</label>
				<select th:field="*{productoModel.idProducto}" class="custom-select col-md-8 col-7" id="productoNuevoItem">
					<option th:each="p: ${productos}" th:value="${p.idProducto}" th:text="${p.nombre}"></option>
				</select>
			</div>

			<!-- ATRIBUTO CHANGO -->
			<div class="form-group row">
				<label for="changoNuevoItem" class="col-sm-3 col-4">Chango</label>
				<select th:field="*{changoModel.idChango}" class="custom-select col-md-8 col-7" id="changoNuevoItem">
					<option th:each="c: ${changos}" th:value="${c.idChango}" th:text="${c.idChango}"></option>
				</select>
			</div>

			<!-- BOTON GUARDAR -->
			<div class="text-center">
				<button type="submit" class="btn btn-primary">Guardar</button>
			</div>

		</form>
		
		
	<!-- MUESTRA LOS ITEMS -->
		<div class="container-fluid col-12 col-md-11 text-center table-responsive">
			<table class="table w-100 shadow mb-3 bg-white rounded">
				<thead class="thead-dark">
					<tr>
						<th scope="col">ID</th>
						<th scope="col">Cantidad</th>
						<th scope="col">Producto</th>
						<th scope="col">Chango</th>
						<th scope="col"> </th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="item :${items}">
						<td th:text="${item.idItem}"></td>
						<td th:text="${item.cantidad}"></td>
						<td th:text="${item.producto.nombre}"></td>
						<td th:text="${item.chango.idChango}"></td>
						<td>
							<button class="btn-danger btn botonEliminar" th:attr="data-idItem=${item.idItem}">Eliminar</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		
		
		
	</main>
	
	
	<!-- BOTON CERRAR -->
	<script th:src="@{/js/abm.js}"></script>
    <div th:replace="fragments/scripts :: scripts"></div>
	
</body>

</html>
